<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Assingment:3</title>
    </head>
  <body>
    
    <h2>Current Subscribers</h2>
    <div id="subcount">
    </div>
    <header>

    </header>
    <section>
      <button onclick="checkLocation()">Get Your Location</button>
        <button onclick="retrieveMyUploads()">ghhgction</button>
      <p id="mybtn"></p>
    </section>
    <footer>
    </footer>

    <script>
  		let header = document.querySelector('header');
  		let section = document.querySelector('section');
      let requestUrl = "https://snawarbrar.github.io/first.github.io/first.json";
          let request = new XMLHttpRequest();
          request.open("GET",requestUrl);
          request.responseType = "json";
          request.send();
          request.onload = function(){
             let  weirdProducts = request.response;
              populateHeader(weirdProducts);
              wierdProducts(weirdProducts);
          };
          function populateHeader(jsonObj)
          {
              let header1 = document.createElement("h1");
              header.textContent = jsonObj["Topic"];
              header.appendChild(header1);

              //let headerPara=document.createElement("p");
              //headerPara.textContent=jsonObj["headOffice"];
              //header.appendChild(headerPara);
          }
          function wierdProducts(jsonObj)
          {
              let wierdProducts = jsonObj["wierdProducts"];
          for(let i= 0; i<wierdProducts.length;i++)
          {
              let article = document.createElement("article");
              let h2 = document.createElement("h2");
              let img = document.createElement("img");
              let p1 = document.createElement("p");
              let p2 = document.createElement("p");
              let list = document.createElement("ul");
              img.setAttribute("src", "Images/" + wierdProducts[i].image);
              img.setAttribute('width','26%');
              h2.textContent = "Name:- "+wierdProducts[i].productName;
              p1.textContent = "Price:- "+wierdProducts[i].price;
              p2.textContent = "Discription:- "+wierdProducts[i].discription;
              let features = wierdProducts[i].features;
              for(let j = 0; j< features.length; j++)
              {
                  let productFeatures = document.createElement("li");
                  productFeatures.textContent = features[j];
                  list.appendChild(productFeatures);
              }
              article.appendChild(img);
              article.appendChild(h2);
              article.appendChild(p1);
              article.appendChild(p2);
              article.appendChild(list);
              section.appendChild(article);

          }
          }
          var locPara = document.getElementById("mybtn");
          function checkLocation() {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showMyLocation);
          } else {
            locPara.innerHTML = "Feature not supported by browser!!";
          }
          }

          function showMyLocation(position) {
          locPara.innerHTML = "Latitude: " + position.coords.latitude +
          "<br>Longitude: " + position.coords.longitude;
          }

          const youtubeKey = 'AIzaSyAgABPq6LyTOq0SvAZw-4sIczveun9gVps';
    const youtubeUser = 'UCiIf-_AN5VQvCRENg2WIHMA';
    const subCount = document.getElementById('subcount');

    let getSubscribers = () => {

        fetch(`https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${youtubeUser}&key=${youtubeKey}`)
        .then(response => {
            return response.json()
        })
        .then(data => {
            console.log(data);
            subcount.innerHTML = data["items"][0].statistics.subscriberCount;
        })

    }

    getSubscribers();


  		</script>
    <main>

    </main>
  </body>
</html>
